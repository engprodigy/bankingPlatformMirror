@using IdentityServer4.Extensions
@{
    string name = null;
    if (!true.Equals(ViewData["signed-out"]))
    {
        name = Context.User?.GetDisplayName();
    }
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="~/img/apple-icon.png">
    <link rel="icon" type="image/png" href="~/img/favicon.png">
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no" name="viewport" />
    <title> TheCoreBanking | @ViewData["Title"]</title>
    <environment include="Development">
        <link href="~/css/Montserrat.css" rel="stylesheet" />
        <link href="~/css/bootstrap.min.css" rel="stylesheet" />
        <link href="~/css/now-ui-dashboard.css" rel="stylesheet" />
        <link href="~/css/pace/red/pace-theme-flat-top.css" rel="stylesheet" />
        <link href="~/css/select2/select2.css" rel="stylesheet" />
        <link href="~/css/select2/select2-bootstrap4.css" rel="stylesheet" />
        <link href="~/css/bootstraptable/bootstrap-table.css" rel="stylesheet" />
        <link href="~/css/fontawesome/css/all.css" rel="stylesheet" />
        <link href="~/css/bootstrap-fileinput/fileinput.css" rel="stylesheet" />
        <link href="~/css/site.css" rel="stylesheet" />
    </environment>
    <environment exclude="Development">
        <link href="~/css/Montserrat.min.css" rel="stylesheet" />
        <link href="~/css/bootstrap.min.css" rel="stylesheet" />
        <link href="~/css/now-ui-dashboard.css" rel="stylesheet" />
        <link href="~/css/pace/red/pace-theme-flat-top.css" rel="stylesheet" />
        <link href="~/css/select2/select2.min.css" rel="stylesheet" />
        <link href="~/css/select2/select2-bootstrap4.min.css" rel="stylesheet" />
        <link href="~/css/bootstraptable/bootstrap-table.css" rel="stylesheet" />
        <link href="~/css/fontawesome/css/all.min.css" rel="stylesheet" />
        <link href="~/css/bootstrap-fileinput/fileinput.min.css" rel="stylesheet" />
        <link href="~/css/site.min.css" rel="stylesheet" />
    </environment>
    @RenderSection("Styles", false)
</head>
<body>
    <div class="wrapper">
        <div class="sidebar" data-color="red">
            <!--
            Tip 1: You can change the color of the sidebar using: data-color="blue | green | orange | red | yellow"
            -->
            <div class="logo">
                <a href="/" class="logo-mini simple-text">
                    FB
                </a>
                <a href="/" class="logo-normal simple-text">
                    Fintrak &reg; Bank
                </a>
                <div class="navbar-minimize">
                    <button id="minimizeSidebar" class="btn btn-icon btn-neutral btn-round btn-simple">
                        <i class="now-ui-icons text_align-center visible-on-sidebar-regular"></i>
                        <i class="design_bullet-list-67 now-ui-icons visible-on-sidebar-mini"></i>
                    </button>
                </div>
            </div>
            <div class="sidebar-wrapper">
                <div class="user">
                    <div class="photo">
                        <img src="~/img/james.jpg" alt="james" />
                    </div>
                    <div class="info">
                        <a data-toggle="collapse" href="#collapseExample" class="collapsed">
                            <span>
                                @name
                                <b class="caret"></b>
                            </span>
                        </a>
                        <div class="clearfix"></div>
                        <div class="collapse" id="collapseExample">
                            <ul class="nav">
                                <li>
                                    <a href="#">
                                        <span class="sidebar-mini-icon">MP</span>
                                        <span class="sidebar-normal">My Profile</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <span class="sidebar-mini-icon">EP</span>
                                        <span class="sidebar-normal">Edit Profile</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <span class="sidebar-mini-icon">S</span>
                                        <span class="sidebar-normal">Settings</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <ul class="nav">
                    <li>
                        <a asp-controller="Operations" asp-action="RegisterCheque">
                            <i class="design_app now-ui-icons"></i>
                            <p>Register Cheque</p>
                        </a>
                    </li>
                    <li>
                        <a asp-controller="Operations" asp-action="StopCheque">
                            <i class="design_app now-ui-icons"></i>
                            <p>Stop Cheque</p>
                        </a>
                    </li>
                    <li>
                        <a asp-controller="Operations" asp-action="ChequeStatus">
                            <i class="design_app now-ui-icons"></i>
                            <p>Cheque Status</p>
                        </a>
                    </li>
                    <li>
                        <a data-toggle="collapse" href="#navChequeServices">
                            <i class="design_app now-ui-icons"></i>
                            <p>
                                Cheque Services <b class="caret"></b>
                            </p>
                        </a>
                        <div class="collapse show" id="navChequeServices">
                            <ul class="nav">
                                <li>
                                    <a asp-controller="Operations" asp-action="InwardClearing">
                                        <span class="sidebar-mini-icon">IC</span>
                                        <span class="sidebar-normal">Inward Clearing</span>
                                    </a>
                                </li>
                                <li>
                                    <a asp-controller="Operations" asp-action="OutwardClearing">
                                        <span class="sidebar-mini-icon">OC</span>
                                        <span class="sidebar-normal">Outward Clearing</span>
                                    </a>
                                </li>
                                <li>
                                    <a asp-controller="Operations" asp-action="OutwardOperations">
                                        <span class="sidebar-mini-icon">OC</span>
                                        <span class="sidebar-normal">Outward Operations</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a asp-controller="Setup" asp-action="Index">
                            <i class="design_app now-ui-icons"></i>
                            <p>Setup</p>
                        </a>
                    </li>
                    <li>
                        <a asp-controller="TellerAndTill" asp-action="Index">
                            <i class="design_app now-ui-icons"></i>
                            <p>Teller &amp; Till Setup</p>
                        </a>
                    </li>
                    <li>
                        <a asp-controller="TellerAndTill" asp-action="TellerOperation">
                            <i class="design_app now-ui-icons"></i>
                            <p>Teller Operation</p>
                        </a>
                    </li>
                    @if(ViewData["ShowPostingMenu"] == "Valid"){
                <li>
                    <a asp-controller="TellerAndTill" asp-action="TellerPosting">
                        <i class="design_app now-ui-icons"></i>
                        <p>Teller Posting</p>
                    </a>
                </li>
                    }

                    @*@if (User.Identity.IsAuthenticated) {
            <li>
                <a asp-controller="TellerAndTill" asp-action="TellerPosting">
                    <i class="design_app now-ui-icons"></i>
                    <p>Teller Posting</p>
                </a>
            </li>
        }*@
                    @*<li>
                        <a asp-controller="TellerAndTill" asp-action="TellerPosting">
                            <i class="design_app now-ui-icons"></i>
                            <p>Teller Posting</p>
                        </a>
                    </li>*@
                </ul>
            </div>
        </div>
        <div class="main-panel">
            <!-- Navbar -->
            <nav class="bg-primary fixed-top navbar navbar-absolute navbar-expand-lg navbar-transparent">
                <div class="container-fluid">
                    <div class="navbar-wrapper">
                        <div class="navbar-toggle">
                            <button type="button" class="navbar-toggler">
                                <span class="bar1 navbar-toggler-bar"></span>
                                <span class="bar2 navbar-toggler-bar"></span>
                                <span class="bar3 navbar-toggler-bar"></span>
                            </button>
                        </div>
                        <a class="navbar-brand" href="#pablo">@RenderSection("title", false)</a>
                    </div>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-kebab navbar-toggler-bar"></span>
                        <span class="navbar-kebab navbar-toggler-bar"></span>
                        <span class="navbar-kebab navbar-toggler-bar"></span>
                    </button>
                    <div class="collapse justify-content-end navbar-collapse" id="navigation">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" href="#pablo">
                                    <i class="media-2_sound-wave now-ui-icons"></i>
                                    <p>
                                        <span class="d-lg-none d-md-block">Stats</span>
                                    </p>
                                </a>
                            </li>
                            <li class="dropdown nav-item">
                                <a class="dropdown-toggle nav-link" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="location_world now-ui-icons"></i>
                                    <p>
                                        <span class="d-lg-none d-md-block">Some Actions</span>
                                    </p>
                                </a>
                                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                                    <a class="dropdown-item" href="#">Action</a>
                                    <a class="dropdown-item" href="#">Another action</a>
                                    <a class="dropdown-item" href="#">Something else here</a>
                                </div>
                            </li>
                            <li class="dropdown nav-item">
                                <a class="dropdown-toggle nav-link" href="#" id="navbarDropdownAccountLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="now-ui-icons users_single-02"></i>
                                    <p>
                                        <span class="d-lg-none d-md-block">Account</span>
                                    </p>
                                </a>
                                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownAccountLink">
                                    @*@await Html.PartialAsync("_LoginPartial")*@
                                    <a class="dropdown-item" href="#"><i class="files_single-copy-04 now-ui-icons"></i>Register</a>
                                    <a class="dropdown-item" href="#"><i class="now-ui-icons ui-1_lock-circle-open"></i>Login</a>
                                    @if (User.Identity.IsAuthenticated)
                                    {
                                        <a class="dropdown-item"><i class="now-ui-icons ui-1_lock-circle-open"></i>Logout</a>
                                    }
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <!-- End Navbar -->
            <div class="panel-header text-center">
                <div class="header mb-0">
                    @RenderSection("pagedescription", false)
                </div>
            </div>
            <div class="content">
                @RenderBody()
            </div>
            <footer class="footer">
                <div class="container-fluid">
                    <nav>
                        <ul>
                            <li>
                                <a href="https://www.fintraksoftware.com/">
                                    Fintrak Software Co. Limited
                                </a>
                            </li>
                            <li>
                                <a href="http://presentation.fintraksoftware.com/">
                                    About Us
                                </a>
                            </li>
                            <li>
                                <a href="http://blog.fintraksoftware.com/">
                                    Blog
                                </a>
                            </li>
                        </ul>
                    </nav>
                    <div class="copyright">
                        &copy;
                        <script>document.write(new Date().getFullYear())</script> - TheCoreBanking by <a href="https://www.fintraksoftware.com/" target="_blank">Fintrak Software Co. Limited</a>.
                    </div>
                </div>
            </footer>
        </div>
    </div>
    <environment include="Development">
        <script src="~/js/core/jquery.min.js"></script>
        <script src="~/js/core/popper.min.js"></script>
        <script src="~/js/core/bootstrap.min.js"></script>
        @*<script src="~/js/select2/select2.min.js"></script>*@
        <script src="~/js/select2/select2.mod.js"></script>
        <script src="~/js/plugins/perfect-scrollbar.jquery.min.js"></script>
        <script src="~/js/plugins/moment.min.js"></script>
        <script src="~/js/plugins/bootstrap-switch.js"></script>
        <script src="~/js/plugins/sweetalert2.min.js"></script>
        <script src="~/js/plugins/jquery.validate.min.js"></script>
        <script src="~/js/plugins/jquery.bootstrap-wizard.js"></script>
        <script src="~/js/plugins/bootstrap-selectpicker.js"></script>
        <script src="~/js/plugins/bootstrap-datetimepicker.js"></script>
        <script src="~/js/bootstraptable/bootstrap-table.js"></script>
        <script src="~/js/bootstraptable/mobile/bootstrap-table-mobile.js"></script>
        <script src="~/js/plugins/bootstrap-tagsinput.js"></script>
        <script src="~/js/plugins/jasny-bootstrap.min.js"></script>
        <script src="~/js/plugins/fullcalendar.min.js"></script>
        <script src="~/js/plugins/jquery-jvectormap.js"></script>
        <script src="~/js/plugins/nouislider.min.js"></script>
        <script async defer src="~/js/plugins/buttons.js"></script>
        <script src="~/js/plugins/chartjs.min.js"></script>
        <script src="~/js/plugins/bootstrap-notify.js"></script>
        <script src="~/js/now-ui-dashboard.minf700.js"></script>
        <script src="~/js/bootstrap-fileinput/fileinput.js"></script>
        <script src="~/js/bootstrap-fileinput/themes/fas/theme.js"></script>
        <script src="~/js/pace.js"></script>
    </environment>
    <environment exclude="Development">
        <script src="~/js/core/jquery.min.js"></script>
        <script src="~/js/core/popper.min.js"></script>
        <script src="~/js/core/bootstrap.min.js"></script>
        <script src="~/js/select2/select2.mod.js"></script>
        <script src="~/js/plugins/perfect-scrollbar.jquery.min.js"></script>
        <script src="~/js/plugins/moment.min.js"></script>
        <script src="~/js/plugins/bootstrap-switch.js"></script>
        <script src="~/js/plugins/sweetalert2.min.js"></script>
        <script src="~/js/plugins/jquery.validate.min.js"></script>
        <script src="~/js/plugins/jquery.bootstrap-wizard.js"></script>
        <script src="~/js/plugins/bootstrap-selectpicker.js"></script>
        <script src="~/js/plugins/bootstrap-datetimepicker.js"></script>
        <script src="~/js/bootstraptable/bootstrap-table.min.js"></script>
        <script src="~/js/bootstraptable/mobile/bootstrap-table-mobile.min.js"></script>
        <script src="~/js/plugins/bootstrap-tagsinput.js"></script>
        <script src="~/js/plugins/jasny-bootstrap.min.js"></script>
        <script src="~/js/plugins/fullcalendar.min.js"></script>
        <script src="~/js/plugins/jquery-jvectormap.js"></script>
        <script src="~/js/plugins/nouislider.min.js"></script>
        <script async defer src="~/js/plugins/buttons.js"></script>
        <script src="~/js/plugins/chartjs.min.js"></script>
        <script src="~/js/plugins/bootstrap-notify.js"></script>
        <script src="~/js/now-ui-dashboard.minf700.js"></script>
        <script src="~/js/bootstrap-fileinput/fileinput.min.js"></script>
        <script src="~/js/bootstrap-fileinput/themes/fas/theme.min.js"></script>
        <script src="~/js/pace.js"></script>
    </environment>
    <script type="text/javascript">
        $(document).ready(function () {

           
          // if (window.location.pathname != "/TellerAndTill/TellerPosting") {   //use this for local deployment
                //Show something
             if (!(window.location.pathname).includes("TellerPosting"))  {      
            
                console.log(window.location.pathname);
                hashHandler();
            } else {
               //console.log('The hash has changed!');
              
            }
            

           
            
        });

        function hashHandler() {
           // console.log('The hash has changed!');
            $.getJSON("../TellerAndTill/GetAlreadyLoggedinList", function (value) {
                if (value == true) {
                console.log('User Logged Out Successfully!');
                    }
               });
            }

        
        // money formatting functions
        function FormatMoney(money) {
            money = money.toString()
                .trim().replace(/,/g, '');
            if (money == "") return money;
            var integerPrefix = Math.trunc(Number(money))
                .toString()
                .replace(/\B(?=(\d{3})+(?!\d))/g, ",");
            if (money.lastIndexOf(".") !== -1) {
                return integerPrefix + "."
                    + Number(
                        Number("." + money.slice(money.lastIndexOf(".") + 1))
                            .toFixed(5)
                    ).toString().split(".", 2)[1];
            }
            return integerPrefix;
        }
        function UnFormatMoney(money) {
            return Number(money.toString().replace(/,/g, ""));
        }
        // for input elements
        $(".format-money").on("change", function () {
            var amtValue = $.trim(this.value).replace(/,/g, ""); // remove commas
            var lastvalueofAmtString = amtValue.slice(-1);
            var realAmount;

            switch (lastvalueofAmtString.toLowerCase()) {
                case 't':
                    realAmount = Number(amtValue.replace(lastvalueofAmtString, "")) * 1000;
                    break;
                case 'm':
                    realAmount = Number(amtValue.replace(lastvalueofAmtString, "")) * 1000000;
                    break;
                case 'b':
                    realAmount = Number(amtValue.replace(lastvalueofAmtString, "")) * 1000000000;
                    break;
                default:
                    realAmount = amtValue;
            }

            this.value = FormatMoney(realAmount);
        });
        

       
    </script>


    @RenderSection("Scripts", false)
</body>
</html>