function logoutFormatter(){return'<button type="button" class="remove btn btn-sm btn-danger" title="Delete"><i class="now-ui-icons users_single-02"><\/i> Click To logout<\/button>'}function initReversal(id){var row_data=$("#transfer-transaction-table").bootstrapTable("getRowByUniqueId",id);console.log(row_data);swal({title:"Are you sure?",text:"Transaction will be reversed!",type:"warning",showCancelButton:!0,confirmButtonColor:"#ff9800",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},4e3)})}}).then(function(isConfirm){if(isConfirm){var Ref=$("#tillvaultrefNo").val();row_data.creditAmt!=0?(row_data.debitAmt=row_data.creditAmt,row_data.creditAmt=0,$.ajax({url:"../TellerAndTill/RetreiveDebitAccountGL/",type:"POST",data:{Ref:row_data.ref},dataType:"json",success:function(result){debitAccountGL=result;console.log(result);$.ajax({url:"../TellerAndTill/AddVaultToTillReversal/",type:"POST",data:{AccountId:row_data.accountId,DebitAmt:row_data.debitAmt,CreditAmt:row_data.creditAmt,Ref,Description:row_data.description,TransactionType:row_data.transactionType},dataType:"json",success:function(result){result.toString!==""&&result!==null?console.log(result):(swal({title:"Add vault to till details",text:"Something went wrong: <\/br>"+result.toString(),type:"error"}).then(function(){clearForm()}),$("#btnAddVaultTill").removeAttr("disabled"))},error:function(){swal({title:"Add vault to till details",text:"Vault to till details add encountered an error",type:"error"}).then(function(){clearForm()});$("#btnAddVaultTill").removeAttr("disabled")}});row_data.creditAmt=row_data.debitAmt;row_data.debitAmt=0;$.ajax({url:"../TellerAndTill/AddVaultToTillReversal/",type:"POST",data:{AccountId:debitAccountGL,DebitAmt:row_data.debitAmt,CreditAmt:row_data.creditAmt,Ref,Description:row_data.description,TransactionType:row_data.transactionType},dataType:"json",success:function(result){result.toString!==""&&result!==null?(swal({title:"Add vault to till details",text:"Reversal Transaction completed successfully!",type:"success"}).then(),$("#transferreverse").val()==0?$("#transfer-transaction-table").bootstrapTable("refresh",{url:url}):$("#transfer-transaction-table").bootstrapTable("refresh",{url:url2}),console.log($("#transferreverse").val()),console.log(result),$("#cashtillrefNo").val(result),$("#tillvaultrefNo").val(result)):(swal({title:"Add vault to till details",text:"Something went wrong: <\/br>"+result.toString(),type:"error"}).then(function(){clearForm()}),$("#btnAddVaultTill").removeAttr("disabled"))},error:function(){swal({title:"Add vault to till details",text:"Vault to till details add encountered an error",type:"error"}).then(function(){clearForm()});$("#btnAddVaultTill").removeAttr("disabled")}})},error:function(){swal({title:"Add vault to till details",text:"Vault to till details add encountered an error",type:"error"}).then(function(){clearForm()});$("#btnAddVaultTill").removeAttr("disabled")}})):(row_data.CreditAmt=row_data.DebitAmt,row_data.DebitAmt=0)}},function(){swal("Reverse Vault/Till Transaction","You cancelled transaction reversal.","error")})}function RemoveTellerPosting(url_path){return url_path.slice(0,14)}function clearForm(){var form=$("#frmVaultTill"),form1;form.trigger("reset");form.find("select").trigger("change");form1=$("#HideByTillVault");$("#tillvaultaccounts").val("0");$("#tillvaultaccounts").val("change");$("#tillvaultcurrentBal").val("");$("#amountwordsTilltoVault").html("");$("#amountwords").html("")}function numberToEnglish(n){var string=n.toString(),units,tens,scales,start,end,chunks,chunksLen,chunk,ints,i,word,words;if(string=string.replace(/[, ]/g,""),parseInt(string)===0)return"zero";for(units=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],tens=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],scales=["","Thousand","Million","Billion","Trillion","Quadrillion","Quintillion","Sextillion","Septillion","Octillion","Nonillion","Decillion","Undecillion","Duodecillion","Tredecillion","Quatttuor-decillion","Quindecillion","Sexdecillion","Septen-decillion","Octodecillion","Novemdecillion","Vigintillion","Centillion"],start=string.length,chunks=[];start>0;)end=start,chunks.push(string.slice(start=Math.max(0,start-3),end));if(chunksLen=chunks.length,chunksLen>scales.length)return"";for(words=[],i=0;i<chunksLen;i++)chunk=parseInt(chunks[i]),chunk&&(ints=chunks[i].split("").reverse().map(parseFloat),ints[1]===1&&(ints[0]+=10),(word=scales[i])&&words.push(word),(word=units[ints[0]])&&words.push(word),(word=tens[ints[1]])&&words.push(word),(ints[0]||ints[1])&&(ints[2]||i+1>chunksLen)&&words.push("and"),(word=units[ints[2]])&&words.push(word+" hundred"));return words.reverse().join(" ")}function getAsDate(day,time){var hours=Number(time.match(/^(\d+)/)[1]),minutes=Number(time.match(/:(\d+)/)[1]),AMPM=time.match(/\s(.*)$/)[1],sHours,sMinutes;AMPM==="pm"&&hours<12&&(hours=hours+12);AMPM==="am"&&hours===12&&(hours=hours-12);sHours=hours.toString();sMinutes=minutes.toString();hours<10&&(sHours="0"+sHours);minutes<10&&(sMinutes="0"+sMinutes);time=sHours+":"+sMinutes+":00";var d=new Date(day),n=d.toISOString().substring(0,10);return new Date(n+"T"+time)}function addVaultToTill(){$("#frmVaultTill").validate({debug:!0,onfocusout:!1,onkeyup:!1,onclick:!1,normalizer:function(value){return $.trim(value)},errorPlacement:function(error){$.notify({icon:"now-ui-icons travel_info",message:error.text()},{type:"danger",placement:{from:"top",align:"right"}})},rules:{vaultAcct:{required:!0},amountfigures:{required:!0},cashtillacct:{required:!0},transWithdrawalName:{required:!0},transWithdrawalDate:{required:!0},amountWithdrawalFigure:{required:!0}},messages:{vaultAcct:{required:"Please select vault account name"},amountfigures:{required:"Amount box can not be empty"},cashtillacct:{required:"Cash till account is required"}},submitHandler:function(){$("input[type=submit]").attr("disabled","disabled");swal({title:"Are you sure?",text:"Vault to till details will be added!",type:"warning",showCancelButton:!0,confirmButtonColor:"#ff9800",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},4e3)})}}).then(function(isConfirm){if(isConfirm){$("#btnAddVaultTill").attr("disabled","disabled");var AccountId=$("#vaultAcctGL").val(),CreditAmt=$("#amountfigures").val(),cashtillaccount=$("#cashtillacct").val(),Ref=$("#cashtillrefNo").val(),Description=$("#vaulttillRemark").val();$.ajax({url:"../TellerAndTill/AddVaultToTill/",type:"POST",data:{AccountId,DebitAmt:0,CreditAmt,Ref,Description,TransactionType:38},dataType:"json",success:function(result){result.toString!==""&&result!==null?$("#btnAddVaultTill").removeAttr("disabled"):(swal({title:"Add vault to till details",text:"Something went wrong: <\/br>"+result.toString(),type:"error"}).then(function(){clearForm()}),$("#btnAddVaultTill").removeAttr("disabled"))},error:function(){swal({title:"Add vault to till details",text:"Vault to till details add encountered an error",type:"error"}).then(function(){clearForm()});$("#btnAddVaultTill").removeAttr("disabled")}});$.ajax({url:"../TellerAndTill/AddVaultToTill/",type:"POST",data:{AccountId:cashtillaccount,DebitAmt:CreditAmt,CreditAmt:0,Ref,Description,TransactionType:38},dataType:"json",success:function(result){if(result.toString!==""&&result!==null){swal({title:"Add vault to till details",text:"Vault to till details addition completed successfully!",type:"success"}).then(function(){clearForm()});var form=$("#frmVaultTill");form.trigger("reset");form.find("select").trigger("change");$("#btnAddVaultTill").removeAttr("disabled");$("#cashtillrefNo").val(result);console.log(result)}else swal({title:"Add vault to till details",text:"Something went wrong: <\/br>"+result.toString(),type:"error"}).then(function(){clearForm()}),$("#btnAddVaultTill").removeAttr("disabled")},error:function(){swal({title:"Add vault to till details",text:"Vault to till details add encountered an error",type:"error"}).then(function(){clearForm()});$("#btnAddVaultTill").removeAttr("disabled")}})}},function(){swal("Add vault to till details","You cancelled vault to till details add.","error");$("#btnAddVaultTill").removeAttr("disabled")})}})}function addTillToVault(){$("#frmTillVault").validate({debug:!0,onfocusout:!1,onkeyup:!1,onclick:!1,normalizer:function(value){return $.trim(value)},errorPlacement:function(error){$.notify({icon:"now-ui-icons travel_info",message:error.text()},{type:"danger",placement:{from:"top",align:"right"}})},rules:{cashtillvaultacct:{required:!0},tillvaultamountfigures:{required:!0},tillvaultaccounts:{required:!0},transWithdrawalName:{required:!0}},messages:{cashtillvaultacct:{required:"Please select account number/name"},tillvaultamountfigures:{required:"Amount box can not be empty"},tillvaultaccounts:{required:"Please selct vault account"},tillvaultRemark:{required:"Description box can not be empty"}},submitHandler:function(){$("input[type=submit]").attr("disabled","disabled");swal({title:"Are you sure?",text:"Till Vault details will be added!",type:"warning",showCancelButton:!0,confirmButtonColor:"#ff9800",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},4e3)})}}).then(function(isConfirm){if(isConfirm){$("#btnAddTillVault").attr("disabled","disabled");var AccountId=$("#tilltoVaultGL").val(),DebitAmt=$("#tillvaultamountfigures").val(),cashtillaccount=$("#tilltoCashAcctGL").val(),Ref=$("#tillvaultrefNo").val(),Description=$("#tillvaultRemark").val();$.ajax({url:"../TellerAndTill/AddVaultToTill/",type:"POST",data:{AccountId,DebitAmt,CreditAmt:0,Ref,Description,TransactionType:37},dataType:"json",success:function(result){result.toString!==""&&result!==null?clearForm():(swal({title:"Add till vault details",text:"Something went wrong: <\/br>"+result.toString(),type:"error"}).then(function(){clearForm()}),$("#btnAddTillVault").removeAttr("disabled"))},error:function(){swal({title:"Add till vault details",text:"Till vault details addition encountered an error",type:"error"}).then(function(){clearForm()});$("#btnAddTillVault").removeAttr("disabled")}})}$.ajax({url:"../TellerAndTill/AddVaultToTill/",type:"POST",data:{AccountId:cashtillaccount,DebitAmt:0,CreditAmt:DebitAmt,Ref,Description,TransactionType:37},dataType:"json",success:function(result){result.toString!==""&&result!==null?(swal({title:"Add till vault details",text:"Till vault details addition completed successfully!",type:"success"}).then(function(){clearForm()}),$("#btnAddTillVault").removeAttr("disabled")):(swal({title:"Add till vault details",text:"Something went wrong: <\/br>"+result.toString(),type:"error"}).then(function(){clearForm()}),$("#btnAddTillVault").removeAttr("disabled"));var form=$("#frmTillVault");form.trigger("reset");form.find("select").trigger("change");$("#btnAddTillVault").removeAttr("disabled");$("#tillvaultrefNo").val(result);console.log(result)},error:function(){swal({title:"Add till vault details",text:"Till vault details addition encountered an error",type:"error"}).then(function(){clearForm()});$("#btnAddTillVault").removeAttr("disabled")}})},function(){swal("Add till vault details","You cancelledtill vault details add.","error");$("#btnAddTillVault").removeAttr("disabled")})}})}var url_path=window.location.pathname,debitAccountGL,url,url2,utilities,day,time;url_path.charAt(url_path.length-1)==="/"&&(url_path=url_path.slice(0,url_path.length-1));url=url_path;url2=url_path;url=="/retail/TellerAndTill/TellerPosting"?(url="getAllVaultToTillTransfers",url2="getAllTillToVaultTransfers"):(url="/TellerAndTill/getAllVaultToTillTransfers",url2="/TellerAndTill/getAllTillToVaultTransfers");utilities={approvalFormatter:function(val,row){return row.approved==!0?"Approved":"Pending"},reverseTransactionFormatter:function(value,row){return["<button class='btn btn-warning btn-icon' ","onclick='initReversal("+row.id+")'>","<i class='now-ui-icons ui-2_settings-90'>","<\/i><\/button>"].join("")}};$(document).ready(function($){$(".modal").perfectScrollbar();$(".modal").perfectScrollbar();$.fn.select2.defaults.set("theme","bootstrap4");$.fn.select2.defaults.set("dropdownParent",$(".modal").first());$.fn.select2.defaults.set("width","100%");$.fn.select2.defaults.set("allowClear",!0);$("#btnAddVaultTill").on("click",function(){addVaultToTill()});$("#btnAddTillVault").on("click",function(){addTillToVault()})});$(document).ready(function(){var url,url2,test;url=url_path;url2=url_path;url=="/retail/TellerAndTill/TellerPosting"?(url="getAllVaultToTillTransfers",url2="getAllTillToVaultTransfers"):(url="/TellerAndTill/getAllVaultToTillTransfers",url2="/TellerAndTill/getAllTillToVaultTransfers");test=url_path;$("#transfer-transaction-table").bootstrapTable("refresh",{url:url});$("#transfer-transaction-table").hide();$.ajax({url:"../TellerAndTill/GetChartOfAccount2"}).then(function(response){$("#vaultAcct").select2({theme:"bootstrap4",placeholder:"Search/Select GL name",width:"100%",data:response,dropdownParent:$("#AddNewTillVaultOperation.modal")})});$.ajax({url:"../TellerAndTill/getStartReferenceNumber"}).then(function(response){$("#cashtillrefNo").val(response);$("#tillvaultrefNo").val(response);console.log(response)})});$("#vaultAcct").on("select2:select",function(e){var datas=e.params.data;$("#vaultAcctGL").val(datas.accountId);availbalance=datas.availablebalance;$.ajax({url:"../TellerAndTill/loadVaultTillBalance",data:{AccountID:datas.accountId},type:"GET",cache:!1}).then(function(response){$("#currentBal").val(response);balAccounts=response})});$("#transferreverse").on("select2:select",function(e){var url,url2,datas;url=url_path;url2=url_path;url=="/retail/TellerAndTill/TellerPosting"?(url="getAllVaultToTillTransfers",url2="getAllTillToVaultTransfers"):(url="/TellerAndTill/getAllVaultToTillTransfers",url2="/TellerAndTill/getAllTillToVaultTransfers");datas=e.params.data;datas.id==0?($("#transfer-transaction-table").bootstrapTable("refresh",{url:url}),$("#transfer-transaction-table").show()):($("#transfer-transaction-table").bootstrapTable("refresh",{url:url2}),$("#transfer-transaction-table").show())});$(document).ready(function(){$("#transferreverse").select2({theme:"bootstrap4",placeholder:"Select Reverse Operation",width:"100%",data:[{id:0,text:"Vault To Till"},{id:1,text:"Till To Vault"}],dropdownParent:$("#AddNewTillVaultOperation.modal")});$("#cashtillacct").select2({theme:"bootstrap4",placeholder:"Loading..."});$.ajax({url:"../TellerAndTill/GetChartOfAccount"}).then(function(response){$("#cashtillacct").select2({theme:"bootstrap4",placeholder:"Search/Select GL number",width:"100%",data:response,dropdownParent:$("#AddNewTillVaultOperation.modal")})});$("#cashtillacct").on("select2:select",function(e){var datas=e.params.data;$("#cashTillAcctGL").val(datas.accountId);availbalance=datas.availablebalance;$.ajax({url:"../TellerAndTill/loadGLBalance",data:{AccountID:datas.accountId},type:"GET",cache:!1}).then(function(response){$("#cashtillcurrentBal").val(response);balAccounts=response})})});$(document).ready(function(){$("#cashtillvaultacct").select2({theme:"bootstrap4",placeholder:"Loading..."});$.ajax({url:"../TellerAndTill/GetChartOfAccountforTellerUser2"}).then(function(response){$("#cashtillvaultacct").select2({theme:"bootstrap4",placeholder:"Search/Select GL number",width:"100%",data:response,dropdownParent:$("#AddNewTillVaultOperation.modal")})});$("#cashtillvaultacct").on("select2:select",function(e){var datas=e.params.data;$("#tilltoVaultGL").val(datas.accountId);availbalance=datas.availablebalance;$.ajax({url:"../TellerAndTill/loadGLBalance",data:{AccountID:datas.accountId},type:"GET",cache:!1}).then(function(response){$("#tilltovaultcurrentBal").val(response);balAccounts=response})})});$(document).ready(function(){$("#tillvaultaccounts").select2({theme:"bootstrap4",placeholder:"Loading..."});$.ajax({url:"../TellerAndTill/GetChartOfAccount"}).then(function(response){$("#tillvaultaccounts").select2({theme:"bootstrap4",placeholder:"Select vault account",width:"100%",data:response,dropdownParent:$("#AddNewTillVaultOperation.modal")})});$("#tillvaultaccounts").on("select2:select",function(e){var datas=e.params.data;$("#tilltoCashAcctGL").val(datas.accountId);$.ajax({url:"../TellerAndTill/loadGLBalance",data:{AccountID:datas.accountId},type:"GET",cache:!1}).then(function(response){$("#tillvaultcurrentBal").val(response)})})});$(".datetimepicker").datetimepicker({format:"YYYY-MM-DD",icons:{time:"now-ui-icons tech_watch-time",date:"now-ui-icons ui-1_calendar-60",up:"fa fa-chevron-up",down:"fa fa-chevron-down",previous:"now-ui-icons arrows-1_minimal-left",next:"now-ui-icons arrows-1_minimal-right",today:"fa fa-screenshot",clear:"fa fa-trash",close:"fa fa-remove"}});$(document).ready(function(){$("#vaulttotills").change(function(){var form;$("#vaulttotills").prop("checked")==!0?($("#HideByVaulttoTills").show(),form=$("#frmTillVault"),form.trigger("reset"),form.find("select").trigger("change"),$("#amountwordsTilltoVault").html(""),$.ajax({url:"../TellerAndTill/getStartReferenceNumber"}).then(function(response){$("#cashtillrefNo").val(response);$("#tillvaultrefNo").val(response);console.log(response)}),$("#HideByTillVault").hide(),$("#tilltovaults").prop("checked",!1),$("#HideByReverseTransfer").hide(),$("#reversetransfer").prop("checked",!1),$("#transfer-transaction-table").hide(),form=$("#frmReverseTransfer"),form.trigger("reset"),form.find("select").trigger("change")):$("#HideByVaulttoTills").hide();$("#vaulttotills").on("check.bs.table",function(){})})});$.fn.isVisible=function(){return $.expr.filters.visible(this[0])};$(document).ready(function(){$("#tilltovaults").change(function(){var form;$("#tilltovaults").prop("checked")==!0?($("#HideByTillVault").show(),form=$("#frmVaultTill"),form.trigger("reset"),form.find("select").trigger("change"),$("#amountwords").html(""),$.ajax({url:"../TellerAndTill/getStartReferenceNumber"}).then(function(response){$("#cashtillrefNo").val(response);$("#tillvaultrefNo").val(response);console.log(response)}),$("#HideByVaulttoTills").hide(),$("#vaulttotills").prop("checked",!1),$("#HideByReverseTransfer").hide(),$("#reversetransfer").prop("checked",!1),$("#transfer-transaction-table").hide(),form=$("#frmReverseTransfer"),form.trigger("reset"),form.find("select").trigger("change")):$("#HideByTillVault").hide()})});$(document).ready(function(){$("#reversetransfer").change(function(){var form,form2;$("#reversetransfer").prop("checked")==!0?($("#HideByReverseTransfer").show(),form=$("#frmVaultTill"),form.trigger("reset"),form.find("select").trigger("change"),$("#amountwords").html(""),form2=$("#frmTillVault"),form2.trigger("reset"),form2.find("select").trigger("change"),$("#amountwordsTilltoVault").html(""),$("#HideByVaulttoTills").hide(),$("#vaulttotills").prop("checked",!1),$("#HideByTillVault").hide(),$("#tilltovaults").prop("checked",!1),$.ajax({url:"../TellerAndTill/getStartReferenceNumber"}).then(function(response){$("#cashtillrefNo").val(response);$("#tillvaultrefNo").val(response);console.log(response)})):$("#HideByReverseTransfer").hide()})});window.tellerLogoutEvents={};day="02/06/2017";time="05:17 pm";