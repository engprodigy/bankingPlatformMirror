function logoutFormatter(){return'<button type="button" class="remove btn btn-sm btn-danger" title="Delete"><i class="now-ui-icons users_single-02"><\/i> Click To logout<\/button>'}function getAccountBalance(){var accountNumber=$("#ddlAcctNumber").val();$("#ddlAcctReceiverNumberforChequeInward").val(accountNumber);$("#ddlAcctNumberforChequeInward").val("").trigger("change");$("#ddlAcctReceiverNumberforChequeOutward").val(accountNumber);$("#ddlAcctNumberforChequeOutward").val("").trigger("change")}function RemoveTellerPosting(url_path){return url_path.slice(0,14)}function LodgementChange(){$("#ddlAcctNumber").select2({theme:"bootstrap4",placeholder:"Loading..."});$.ajax({url:"../TellerAndTill/GetCustomerAccountNumber"}).then(function(response){$("#ddlAcctNumber").select2({theme:"bootstrap4",placeholder:"Search/Select Account no.",width:"100%",data:response,dropdownParent:$("#AddNewTransferOperation.modal")})});$("#ddlAcctNumberforChequeInward").select2({theme:"bootstrap4",placeholder:"Loading..."});$.ajax({url:"../TellerAndTill/GetCustomerAccountNumber"}).then(function(response){$("#ddlAcctNumberforChequeInward").select2({theme:"bootstrap4",placeholder:"Search/Select Isuuer's Name/Account no.",width:"100%",data:response,dropdownParent:$("#AddNewTransferOperation.modal")})});$("#ddlAcctNumberforChequeOutward").select2({theme:"bootstrap4",placeholder:"Loading..."});$.ajax({url:"../TellerAndTill/GetCustomerAccountNumber"}).then(function(response){$("#ddlAcctNumberforChequeOutward").select2({theme:"bootstrap4",placeholder:"Search/Select Isuuer's Name/Account no.",width:"100%",data:response,dropdownParent:$("#AddNewTransferOperation.modal")})})}function singlechequeDocument(){var singlechequeFile=$("#chequeFileUpload").get(0).files,acctNo,singlechequeData,singlechequeCounter;if(singlechequeFile){for(acctNo=$("#ddlAcctNumber").val(),singlechequeData=new FormData,singlechequeData.append("AccountId",acctNo),singlechequeCounter=0;singlechequeCounter<singlechequeFile.length;singlechequeCounter++)singlechequeData.append("ImageFile",singlechequeFile[singlechequeCounter]);$.ajax("../TellerAndTill/AddExcelChequeUpload/",{method:"POST",contentType:!1,processData:!1,data:singlechequeData,success:function(){swal({title:"Add  details & cheque upload",text:"Details added successfully!",type:"success"}).then(function(){window.location.reload()});$("#AddNewTransferOperation").modal("hide")},error:function(){swal({title:"Details & cheque upload",text:"Details encountered an error",type:"error"}).then(function(){clear()})}})}}function chequeUploadDocument(){var exceluploadDataFile=$("#chequetransUpload").get(0).files,acctNo,exceluploadData,exceluploadCounter;if(exceluploadDataFile){for(acctNo=$("#ddlAcctNumber").val(),exceluploadData=new FormData,exceluploadData.append("AccountId",acctNo),exceluploadCounter=0;exceluploadCounter<exceluploadDataFile.length;exceluploadCounter++)exceluploadData.append("ImageFile",exceluploadDataFile[exceluploadCounter]);$.ajax("../TellerAndTill/AddExcelChequeUpload/",{method:"POST",contentType:!1,processData:!1,data:exceluploadData,success:function(){swal({title:"Add Cheque upload",text:"Cheque upload added successfully!",type:"success"}).then(function(){clear()});$("#AddNewTransferOperation").modal("hide")},error:function(){swal({title:"Cheque upload",text:"Cheque upload encountered an error",type:"error"}).then(function(){clear()})}})}}function chequewithdrawalDocument(){var withdrawalchequeDataFile=$("#withrawchequeFileUpload").get(0).files,accountNo,withrawalchequeData,withrawalchequeCounter;if(withdrawalchequeDataFile){for(accountNo=$("#ddlAcctNumber").val(),withrawalchequeData=new FormData,withrawalchequeData.append("AccountId",accountNo),withrawalchequeCounter=0;withrawalchequeCounter<withdrawalchequeDataFile.length;withrawalchequeCounter++)withrawalchequeData.append("ImageFile",withdrawalchequeDataFile[withrawalchequeCounter]);$.ajax("../TellerAndTill/AddExcelChequeUpload/",{method:"POST",contentType:!1,processData:!1,data:withrawalchequeData,success:function(){swal({title:"Add Cheque upload",text:"Withdrawal & file upload added successfully!",type:"success"}).then(function(){window.location.reload()});$("#AddNewTransferOperation").modal("hide")},error:function(){swal({title:"Cheque upload",text:"Cheque upload encountered an error",type:"error"}).then(function(){clear()})}})}}function CheckedLodgement(){var result=$("input[name ='transactiontype']:checked").val();result==="lodgement"?($("#ShowCashCheque").show(),$("#ShowCashChequeWithdrawal").hide(),$('input[name="cash"]').prop("checked",!1),$('input[name="cashchequewithdrawal"]').prop("checked",!1),$("#lodgmentcashview").hide(),$("#chequetypeView").hide(),$("#withdrawalcashview").hide(),$("#withdrawalchequeview").hide(),$("#HideByExcelUpload").hide(),$('input[name="chequeexcelupload"]').prop("checked",!1),$("#HideBysinglecheque").hide(),$('input[name="singlecheque"]').prop("checked",!1),$("#withdrawalHideBysinglecheque").hide(),$('input[name="withdrawalsinglecheque"]').prop("checked",!1),$("#withdrawalHideByExcelUpload").hide()):$("#ShowCashCheque").hide()}function CheckedWithdrawalView(){var result2=$("input[name ='transactiontype']:checked").val();result2==="withdrawal"&&($("#ShowCashCheque").show(),$('input[name="cash"]').prop("checked",!1),$('input[name="cashchequewithdrawal"]').prop("checked",!1),$("#lodgmentcashview").hide(),$("#chequetypeView").hide(),$("#withdrawalcashview").hide(),$("#withdrawalchequeview").hide(),$("#HideByExcelUpload").hide(),$('input[name="chequeexcelupload"]').prop("checked",!1),$("#HideBysinglecheque").hide(),$('input[name="singlecheque"]').prop("checked",!1),$("#withdrawalHideBysinglecheque").hide(),$('input[name="withdrawalsinglecheque"]').prop("checked",!1))}function CashLodgemntView(){var cash,result,result2,accountNumber;cash=$("#cash:checked").val();result=$("input[name ='transactiontype']:checked").val();cash==="cash"&&result==="lodgement"?($("#lodgmentcashview").show(),$("#chequetypeView").hide(),$("#HideByExcelUpload").hide(),$('input[name="chequeexcelupload"]').prop("checked",!1),$("#HideBysinglecheque").hide(),$('input[name="singlecheque"]').prop("checked",!1)):(result2=$("input[name ='transactiontype']:checked").val(),result2==="withdrawal"&&($("#withdrawalcashview").show(),$("#withdrawalchequeview").hide(),$("#withdrawalHideBysinglecheque").hide(),$('input[name="withdrawalsinglecheque"]').prop("checked",!1),accountNumber=$("#ddlAcctNumber").val(),$.ajax({url:"../TellerAndTill/getCustomerCasaBalance/",data:{accountNumber},type:"GET",dataType:"json",success:function(result){result.toString!==""&&result!==null&&(console.log(result),$("#customerBalanceFigure").val(result))},error:function(){swal({title:"Retrieve Customer Balance",text:"Customer Balance Retrieval encountered an error",type:"error"}).then()}})))}function ChequeLodgmentCheque(){var cheque,result,result2;cheque=$("#cheque:checked").val();result=$("input[name ='transactiontype']:checked").val();cheque==="cheque"&&result==="lodgement"?($("#lodgmentcashview").hide(),$("#chequetypeView").show()):(result2=$("input[name ='transactiontype']:checked").val(),result2==="withdrawal"&&(alert("good one!"),$("#withdrawalchequeview").show(),$("#withdrawalcashview").hide()))}function CashWithdrawalView(){}function ChequeWithdrawalView(){}function CheckSingleUpload(){var singleresult=$("input[name ='singlemultipleexcelupload']:checked").val();singleresult==="singlecheque"&&($(".row").show(),$("#HideBysinglecheque").show(),$("#HideBymultiplecheque").hide(),$("#HideByExcelUpload").hide())}function singlechechDrop(){$("#singlecheque").click(function(){$("#HideBysinglecheque").is(":checked")?($("#HideBysinglecheque").show(),$(".row").show(),$("#HideBymultiplecheque").hide(),$("#HideByExcelUpload").hide()):($(".row").hide(),$("#HideBysinglecheque").hide(),$("#HideByExcelUpload").hide(),$("#HideBymultiplecheque").hide());$("#HideBysinglecheque").is(":unchecked")&&($("#HideBysinglecheque").hide(),$(".row").hide(),$("#HideBymultiplecheque").hide(),$("#HideByExcelUpload").hide())})}function InwardChequeView(){var chequeInputResult=$("input[name ='chequeclearingtype']:checked").val();chequeInputResult==="inward"&&$("#singlecheque").is(":checked")&&($("#HideBysinglecheque").show(),$("#chequeLodgementOtherBanks").hide(),$("#HideBymultiplecheque").hide(),$("#HideByExcelUpload").hide())}function OutwardChequeView(){var chequeInputResult=$("input[name ='chequeclearingtype']:checked").val();chequeInputResult==="outward"&&$("#singlecheque").is(":checked")&&($("#chequeLodgementOtherBanks").show(),$("#HideBysinglecheque").hide(),$("#HideBymultiplecheque").hide(),$("#HideByExcelUpload").hide())}function sleep(milliseconds){for(var start=(new Date).getTime(),i=0;i<1e7;i++)if((new Date).getTime()-start>milliseconds)break}function clearForm(){var form=$("#frmPerformtransaction");form.trigger("reset");form.find("select").trigger("change")}function reloadpage(){location.reload()}function getRndInteger(min,max){return Math.floor(Math.random()*(max-min))+min}function addBasicInfoTransaction(){$("#frmPerformtransaction").validate({debug:!0,onfocusout:!1,onkeyup:!1,onclick:!1,normalizer:function(value){return $.trim(value)},errorPlacement:function(error){$.notify({icon:"now-ui-icons travel_info",message:error.text()},{type:"danger",placement:{from:"top",align:"right"}})},rules:{transDepositorPhone:{required:!0},transDepositSlipNo:{required:!0,number:!0},ddlAcctNumber:{required:!0},transDepositorName:{required:!0},transDate:{required:!0},depositorAddress:{required:!0},amountFigure:{required:!0}},messages:{ddlAcctNumber:{required:"Please Select Account Number"},transDepositorName:{required:"Depositor Name is required"},transDate:{required:"Transaction date is required"},depositorAddress:{required:"Depositor's address is required"},amountFigure:{required:"Amount to lodge is required"},transDepositSlipNo:{required:"Deposit Slip Number is required",number:"Input not valid, please enter digits only"},transDepositorPhone:{required:"Depositor's Phone Number is required",number:"Input not valid, please enter digits only"}},submitHandler:function(){$("input[type=submit]").attr("disabled","disabled");swal({title:"Are you sure?",text:"Basic Info will be added!",type:"warning",showCancelButton:!0,confirmButtonColor:"#ff9800",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},4e3)})}}).then(function(isConfirm){var Ref;if(isConfirm){$("#btnTransactOperations").attr("disabled","disabled");var AccountId=$("#ddlAcctNumber").val(),TransactionDate=$("#transDate").val(),DebitAmt=$("#amountFigure").val(),Description=$("#remark").val(),CreditAmt=$("#amountFigure").val(),CurrencyRate=$("#withdrawalCountercheque").val(),LegType=$("#ddlAcctNumber").val();var dt=new Date,testData=dt.getYear(),ranInt=getRndInteger(100,1e3);console.log(testData);Ref="TRN/"+dt.getYear().toString()+"/"+Date.now().toString()+ranInt.toString();$.ajax({url:"../TellerAndTill/AddLodgement/",type:"POST",data:{Ref,AccountId,TransactionDate,DebitAmt,Description,CreditAmt:0,CurrencyRate,LegType},dataType:"json",success:function(result){if(result.toString!==""&&result!==null){transactionsObj=result;console.log(transactionsObj);$.ajax({url:"../TellerAndTill/AddCounterPartyLodgement/",type:"POST",data:{Ref:transactionsObj.Ref,AccountId,TransactionDate,DebitAmt,Description,CreditAmt,CurrencyRate,LegType},dataType:"json",success:function(result){if(result.toString!==""&&result!==null){transactionsObj=result;console.log(transactionsObj);swal({title:"Add lodgement/widthdrawal",text:"Lodgement/widthdrawal addition completed successfully!",type:"success"}).then(function(){});$("#tellerLoginTable").bootstrapTable("refresh",{url:"listTellerLogin"});var form=$("#frmPerformtransaction");form.trigger("reset");form.find("select").trigger("change");$("#btnTransactOperations").removeAttr("disabled")}},error:function(){swal({title:"Add lodgement and widthdrawal",text:"Lodgement and widthdrawal operation add encountered an error",type:"error"}).then(function(){clearForm()});$("#btnTransactOperations").removeAttr("disabled")}});$("#tellerLoginTable").bootstrapTable("refresh",{url:"listTellerLogin"});var form=$("#frmPerformtransaction");form.trigger("reset");form.find("select").trigger("change");$("#btnTransactOperations").removeAttr("disabled")}else swal({title:"Add lodgement and widthdrawal",text:"Something went wrong: <\/br>"+result.toString(),type:"error"}).then(function(){clearForm()})},error:function(){swal({title:"lodgement and widthdrawal Transactions",text:"Lodgement and widthdrawal operation encountered an error",type:"error"}).then(function(){clearForm()});$("#btnTransactOperations").removeAttr("disabled");return}});$.ajax({url:"../TellerAndTill/AddLodgement/",type:"POST",data:{Ref,AccountId,TransactionDate,DebitAmt:0,Description,CreditAmt,CurrencyRate,LegType},dataType:"json",success:function(result){if(result.toString!==""&&result!==null){swal({title:"Add lodgement/widthdrawal",text:"Lodgement/widthdrawal transaction completed successfully!",type:"success"}).then(function(){});$("#tellerLoginTable").bootstrapTable("refresh",{url:"listTellerLogin"});var form=$("#frmPerformtransaction");form.trigger("reset");form.find("select").trigger("change");$("#btnTransactOperations").removeAttr("disabled")}else swal({title:"Add lodgement and widthdrawal",text:"Something went wrong: <\/br>"+result.toString(),type:"error"}).then(function(){clearForm()}),$("#btnTransactOperations").removeAttr("disabled")},error:function(){swal({title:"Add lodgement and widthdrawal",text:"Lodgement and widthdrawal operation add encountered an error",type:"error"}).then(function(){clearForm()});$("#btnTransactOperations").removeAttr("disabled")}})}},function(){swal("Add lodgement and widthdrawal","You cancelled lodgement and widthdrawal add.","error");$("#btnTransactOperations").removeAttr("disabled")})}})}function updateWithdrawalTransaction(){$("#frmPerformWithdrawaltransaction").validate({debug:!0,onfocusout:!1,onkeyup:!1,onclick:!1,normalizer:function(value){return $.trim(value)},errorPlacement:function(error){$.notify({icon:"now-ui-icons travel_info",message:error.text()},{type:"danger",placement:{from:"top",align:"right"}})},rules:{transWithdrawalPhone:{required:!0},withdrawalSlipNo:{required:!0,number:!0},ddlAcctNumber:{required:!0},transWithdrawalName:{required:!0},transWithdrawalDate:{required:!0},amountWithdrawalFigure:{required:!0}},messages:{ddlAcctNumber:{required:"Please Select Account Number"},transWithdrawalName:{required:"Depositor Name is required"},transWithdrawalDate:{required:"Transaction date is required"},withdrawalSlipNo:{required:"Deposit Slip Number is required",number:"Input not valid, please enter digits only"},transWithdrawalPhone:{required:"Depositor's Phone Number is required",number:"Input not valid, please enter digits only"},amountWithdrawalFigure:{required:"Amount to withdraw is required"}},submitHandler:function(){$("input[type=submit]").attr("disabled","disabled");swal({title:"Are you sure?",text:"Withdrawal Transaction will be added!",type:"warning",showCancelButton:!0,confirmButtonColor:"#ff9800",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},4e3)})}}).then(function(isConfirm){var Ref;if(isConfirm){$("#btnWithdrawalTransactOperations").attr("disabled","disabled");var AccountId=$("#ddlAcctNumber").val(),TransactionDate=$("#transWithdrawalDate").val(),DebitAmt=$("#amountWithdrawalFigure").val(),Description=$("#remark").val(),CreditAmt=$("#amountWithdrawalFigure").val(),LegType=$("#ddlAcctNumber").val();var dt=new Date,testData=dt.getYear(),ranInt=getRndInteger(100,1e3);console.log(testData);Ref="TRN/"+dt.getYear().toString()+"/"+Date.now().toString()+ranInt.toString();$.ajax({url:"../TellerAndTill/AddLodgement/",type:"POST",data:{Ref,AccountId,TransactionDate,DebitAmt:0,Description,CreditAmt,LegType},dataType:"json",success:function(result){if(result.toString!==""&&result!==null){transactionsObj=result;$.ajax({url:"../TellerAndTill/AddCounterPartyWithdrawalLodgement/",type:"POST",data:{Ref:transactionsObj.Ref,AccountId,TransactionDate,DebitAmt,Description,CreditAmt,LegType},dataType:"json",success:function(result){if(result.toString!==""&&result!==null){transactionsObj=result;console.log(transactionsObj);swal({title:"Add lodgement/widthdrawal",text:"Lodgement/widthdrawal addition completed successfully!",type:"success"}).then(function(){});var form=$("#frmPerformWithdrawaltransaction");form.trigger("reset");form.find("select").trigger("change");$("#btnWithdrawalTransactOperations").removeAttr("disabled")}},error:function(){swal({title:"Add lodgement and widthdrawal",text:"Lodgement and widthdrawal operation add encountered an error",type:"error"}).then(function(){clearForm()});$("#btnWithdrawalTransactOperations").removeAttr("disabled")}});var form=$("#frmPerformWithdrawaltransaction");form.trigger("reset");form.find("select").trigger("change");$("#btnWithdrawalTransactOperations").removeAttr("disabled")}else swal({title:"Add lodgement and widthdrawal",text:"Something went wrong: <\/br>"+result.toString(),type:"error"}).then(function(){clearForm()})},error:function(){swal({title:"lodgement and widthdrawal Transactions",text:"Lodgement and widthdrawal operation encountered an error",type:"error"}).then(function(){clearForm()});$("#btnWithdrawalTransactOperations").removeAttr("disabled");return}});$.ajax({url:"../TellerAndTill/AddLodgement/",type:"POST",data:{Ref,AccountId,TransactionDate,DebitAmt,Description,CreditAmt:0,LegType},dataType:"json",success:function(result){if(result.toString!==""&&result!==null){swal({title:"Add lodgement/widthdrawal",text:"Lodgement/widthdrawal transaction completed successfully!",type:"success"}).then(function(){});$("#tellerLoginTable").bootstrapTable("refresh",{url:"listTellerLogin"});var form=$("#frmPerformWithdrawaltransaction");form.trigger("reset");form.find("select").trigger("change");$("#btnWithdrawalTransactOperations").removeAttr("disabled")}else swal({title:"Add lodgement and widthdrawal",text:"Something went wrong: <\/br>"+result.toString(),type:"error"}).then(function(){clearForm()}),$("#btnWithdrawalTransactOperations").removeAttr("disabled")},error:function(){swal({title:"Add lodgement and widthdrawal",text:"Lodgement and widthdrawal operation add encountered an error",type:"error"}).then(function(){clearForm()});$("#btnWithdrawalTransactOperations").removeAttr("disabled")}})}},function(){swal("Add lodgement and widthdrawal","You cancelled lodgement and widthdrawal add.","error");$("#btnWithdrawalTransactOperations").removeAttr("disabled")})}})}function addSingleChequeLodgementInward(){$("#frmSingleChequeLodgementTransactionInward").validate({rules:{ddlAcctNumberforChequeInward:{required:!0},ddlAcctReceiverNumberforChequeInward:{required:!0},singlechequenamelodgementInward:{required:!0},singlechequeamountlodgementInward:{required:!0,number:!0},singlechequenolodgementinward:{required:!0,number:!0},singlechequedatelodgementInward:{required:!0}},messages:{ddlAcctNumberforChequeInward:{required:"Issuer Account Number is required"},ddlAcctReceiverNumberforChequeInward:{required:"Please select Receiver's Account Number"},singlechequenamelodgementInward:{required:"Please Enter Receiver's Name"},singlechequeamountlodgementInward:{required:"please enter an amount"},singlechequenolodgementinward:{required:"Please enter cheque number",number:"cheque value entered is not a valid number"},singlechequedatelodgementInward:{required:"Please select a Date"}},errorPlacement:function(error){$.notify({icon:"now-ui-icons travel_info",message:error.text()},{type:"danger",placement:{from:"top",align:"right"}})},submitHandler:function(form){var form=$("#frmSingleChequeLodgementTransactionInward"),accountNo=form.find("[name=ddlAcctNumberforChequeInward]").val(),chequeleaveno=form.find("[name=singlechequenolodgementinward]").val();bankchequedetail={};bankchequedetail.accountnumber=accountNo;bankchequedetail.chequeleaveno=chequeleaveno;$.ajax(url_path+"/../ConfirmChequeLeaveNoStatus/",{method:"POST",contentType:"application/json",data:JSON.stringify(bankchequedetail)}).then(function(response){if(response){if(form.find("[name=ddlAcctReceiverNumberforChequeInward]").val()==""){$.notify({icon:"now-ui-icons travel_info",message:"Please select Receiver's Account Number"},{type:"danger",placement:{from:"top",align:"right"}});return}if(console.log(response),response=="Cheque No is valid")$.notify({icon:"now-ui-icons travel_info",message:"Cheque Number is valid"},{type:"danger",placement:{from:"top",align:"right"}}),$("btnAddSingleChequeLodgementInward").attr("disabled","disabled"),swal({title:"Are you sure?",text:"Single cheque transaction will be lodged for approval!",type:"warning",showCancelButton:!0,confirmButtonColor:"#ff9800",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},4e3)})}}).then(function(isConfirm){var accountNumber,data,accountName,chargecot;if(isConfirm){accountNumber=$("#ddlAcctNumberforChequeInward").val();data=$("#ddlAcctNumberforChequeInward").select2("data");console.log(data[0].text);console.log(data[0].id);accountName=data[0].text;chargecot=!1;$("#singlechequechargestampdutylodgementInward").is(":checked")&&(chargecot=!0);var chequeDate=$("#singlechequedatelodgementInward").val(),amountOnCheque=$("#singlechequeamountlodgementInward").val(),chequeNo=$("#singlechequenolodgementinward").val(),comment=$("#singlechequecommentlodgementInward").val();$.ajax({url:"../TellerAndTill/LodgeInwardCheque",type:"POST",data:{Casaaccountno:accountNumber,Casaaccountname:accountName,Amount:amountOnCheque,Amountdifference:0,Transactiondate:chequeDate,Datecreated:chequeDate,Chequeleaveno:chequeNo,Principalglid:0,Approved:!1,isreturned:!1,Isreversed:!1,Chargecot:chargecot,Otherreturncheque:!1,Reusecheque:!1,Isdiscountcharge:!1,Isreturncharge:!1},dataType:"json",success:function(){swal({title:"Lodge Inward Request",type:"success",text:"Inward cheque lodged successfully!"});$("#ddlAcctNumberforChequeInward").val("").trigger("change");$("#ddlAcctReceiverNumberforChequeInward").val("");$("#singlechequedatelodgementInward").val("");$("#singlechequeamountlodgementInward").val("");$("#singlechequenolodgementinward").val("");$("#singlechequecommentlodgementInward").val("");$("#singlechequenamelodgementInward").val("")},error:function(){swal({title:"Add single cheque",text:"Single cheque add encountered an error",type:"error"}).then(function(){clearForm()});$("#btnAddSingleCheque").removeAttr("disabled")}})}},function(){swal("Add single cheque","You cancelled single cheque add.","error");$("#btnAddSingleCheque").removeAttr("disabled")});else{if(response=="No Cheque registered with account")return form.find("[name=singlechequenolodgementinward]").val(""),$.notify({icon:"now-ui-icons travel_info",message:"No cheque registered with account"},{type:"danger",placement:{from:"top",align:"right"}});if(response=="Cheque No is Invalid or Out of Range")return form.find("[name=singlechequenolodgementinward]").val(""),$.notify({icon:"now-ui-icons travel_info",message:"Cheque No is Invalid or Out of Range"},{type:"danger",placement:{from:"top",align:"right"}})}}else return form.find("[name=singlechequenolodgementinward]").val(""),$.notify({icon:"now-ui-icons travel_info",message:"Cheque Leaf has been used or has been stopped or has been logged for approval"},{type:"danger",placement:{from:"top",align:"right"}})},function(){AccountCheques=null;AccountChequeLeaves=null;swal({title:"Validate Cheque No.",type:"error",text:"No Cheque Linked to Account/There was an error loading account cheques!"})})}})}function addMultipleCheque(){$("#frmPerformtransaction").validate({messages:{noofcheque:{required:"Select No of cheque"},bankchequemultiple:{required:"Bank is required"},branchchequemultiple:{required:"Branchn is required"},chequecommentmuliple:{required:"Select cheque type is required"}},errorPlacement:function(error){$.notify({icon:"now-ui-icons travel_info",message:error.text()},{type:"danger",placement:{from:"top",align:"right"}})},submitHandler:function(){$("input[type=submit]").attr("disabled","disabled");swal({title:"Are you sure?",text:"Multiple cheque details will be added!",type:"warning",showCancelButton:!0,confirmButtonColor:"#ff9800",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},4e3)})}}).then(function(isConfirm){if(isConfirm){$("#btnAddMultipleCheque").attr("disabled","disabled");var ChequeBank=$("#bankchequemultiple").val(),BankLocation=$("#cheqlocationmultiple").val(),Narration=$("#chequecommentmuliple").val();$.ajax({url:"TellerAndTill/AddMultipleChequeOperation",type:"POST",data:{ChequeBank,BankLocation,Narration},dataType:"json",success:function(result){result.toString!==""&&result!==null?(swal({title:"Add multiple cheque Application",text:"Multiple cheque add completed successfully!",type:"success"}).then(function(){clear()}),$("#tellerLoginTable").bootstrapTable("refresh",{url:"TellerAndTill/listTellerLogin"}),$("#btnAddMultipleCheque").removeAttr("disabled")):(swal({title:"Add multiple cheque",text:"Something went wrong: <\/br>"+result.toString(),type:"error"}).then(function(){clearForm()}),$("#btnAddMultipleCheque").removeAttr("disabled"))},error:function(){swal({title:"Add multiple cheque",text:"Multiple cheque add encountered an error",type:"error"}).then(function(){clearForm()});$("#btnAddMultipleCheque").removeAttr("disabled")}})}},function(){swal("Add multiple cheque","You cancelled multiple cheque add.","error");$("#btnAddMultipleCheque").removeAttr("disabled")})}})}function addChequeUpload(){$("#frmPerformtransaction").validate({messages:{chequeexcelupload:{required:"Select cheque No is required"},chequetranscommentupload:{required:"comment box is required"}},errorPlacement:function(error){$.notify({icon:"now-ui-icons travel_info",message:error.text()},{type:"danger",placement:{from:"top",align:"right"}})},submitHandler:function(){$("input[type=submit]").attr("disabled","disabled");swal({title:"Are you sure?",text:"Cheque upload details will be added!",type:"warning",showCancelButton:!0,confirmButtonColor:"#ff9800",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},4e3)})}}).then(function(isConfirm){if(isConfirm){$("#btnAddExcelUpload").attr("disabled","disabled");var BankLocation=$("#chequeexcelupload").val(),Narration=$("#chequetranscommentupload").val();$.ajax({url:"TellerAndTill/AddChequeUploadOperation",type:"POST",data:{BankLocation,Narration},dataType:"json",success:function(result){$("#chequetransUpload").val()!==""?chequeUploadDocument():(swal({title:"Add cheque",text:"Something went wrong: <\/br>"+result.toString(),type:"error"}).then(function(){clearForm()}),$("#btnAddExcelUpload").removeAttr("disabled"))},error:function(){swal({title:"Add cheque",text:"Cheque add encountered an error",type:"error"}).then(function(){clearForm()});$("#btnAddExcelUpload").removeAttr("disabled")}})}},function(){swal("Add cheque","You cancelled cheque UPLOAD.","error");$("#btnAddExcelUpload").removeAttr("disabled")})}})}function addChequeWithdrawal(){$("#frmPerformtransaction").validate({messages:{withdrawalName:{required:"Name  is required"},withdrawaltransDate:{required:"Transaction date is required"},withdrawalCOT:{required:"COT is required"},withdrawalChequeSlipNo:{required:"Slip no is required"},withdrawalAmount:{number:!0},messages:{withdrawalAmount:{required:"Please enter amount",withdrawalAmount:"Amount is not a valid number"}}},errorPlacement:function(error){$.notify({icon:"now-ui-icons travel_info",message:error.text()},{type:"danger",placement:{from:"top",align:"right"}})},submitHandler:function(){$("input[type=submit]").attr("disabled","disabled");swal({title:"Are you sure?",text:"Cheque withdrawal details will be added!",type:"warning",showCancelButton:!0,confirmButtonColor:"#ff9800",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},4e3)})}}).then(function(isConfirm){if(isConfirm){$("#btnAddWithdrawal").attr("disabled","disabled");var AccountId=$("#ddlAcctNumber").val(),CreditAmt=$("#withdrawalAmount").val(),Narration=$("#withdrawaladdInfo").val(),Description=$("#withdrawaRemark").val();$.ajax({url:"../TellerAndTill/AddChequeWithdrawal/",type:"POST",data:{AccountId,CreditAmt,Narration,Description},dataType:"json",success:function(result){$("#withrawchequeFileUpload").val()!==""?chequewithdrawalDocument():(swal({title:"Add cheque withdrawal",text:"Something went wrong: <\/br>"+result.toString(),type:"error"}).then(function(){clearForm()}),$("#btnAddWithdrawal").removeAttr("disabled"))},error:function(){swal({title:"Add cheque withdrawal",text:"Cheque withdrawal add encountered an error",type:"error"}).then(function(){clearForm()});$("#btnAddWithdrawal").removeAttr("disabled")}})}},function(){swal("Add cheque withdrawal","You cancelled cheque withdrawal add.","error");$("#btnAddWithdrawal").removeAttr("disabled")})}})}var url_path=window.location.pathname,transactionsObj,returnTracker;url_path.charAt(url_path.length-1)==="/"&&(url_path=url_path.slice(0,url_path.length-1));transactionsObj={};$(document).ready(function($){$("#frmSingleChequeLodgementTransactionInward").submit(function(e){e.preventDefault()});$("#btnTransactOperations").on("click",function(){addBasicInfoTransaction()});$("#btnWithdrawalTransactOperations").on("click",function(){updateWithdrawalTransaction()});$("#btnAddSingleChequeLodgementInward").on("click",function(){addSingleChequeLodgementInward()});$("#btnAddMultipleCheque").on("click",function(){addMultipleCheque()});$("#btnAddExcelUpload").on("click",function(){addChequeUpload()});$("#btnAddWithdrawal").on("click",function(){addChequeWithdrawal()});$("#ddlAcctNumber").on("select2:selecting",function(){getAccountBalance()});$("#ddlAcctNumberforChequeInward").on("select2:selecting",function(){var accountNumber=$("#ddlAcctNumber").val();$("#ddlAcctReceiverNumberforChequeInward").val(accountNumber)});$("#ddlAcctNumberforChequeOutward").on("select2:selecting",function(){var accountNumber=$("#ddlAcctNumber").val();$("#ddlAcctReceiverNumberforChequeOutward").val(accountNumber)});$("#bankname").select2({theme:"bootstrap4",placeholder:"Select Bank",width:"100%",data:[{id:0,text:"Guaranty Trust Bank"},{id:1,text:"Zenith Bank"},{id:0,text:"Access Bank"},{id:1,text:"First Bank"},{id:0,text:"Fidelity Bank"},{id:1,text:"Wema Bank"}],dropdownParent:$("#AddNewTransferOperation.modal")})});$(document).ready(function($){$(".modal").perfectScrollbar();$.fn.select2.defaults.set("theme","bootstrap4");$.fn.select2.defaults.set("dropdownParent",$(".modal").first());$.fn.select2.defaults.set("width","100%");$.fn.select2.defaults.set("allowClear",!0);LodgementChange()});$(document).ready(function(){$("#singlecheque").change(function(){$('input[name="chequeclearingtype"]').prop("checked",!1);$("#chequeclearingTypeView").show();$("#chequeexcelupload:checked").val()&&($("#HideByExcelUpload").hide(),$('input[name="chequeexcelupload"]').prop("checked",!1))})});$(document).ready(function(){$("#withdrawalsinglecheque").change(function(){$("#withdrawalHideBysinglecheque").toggle();$("#withdrawalchequeexcelupload:checked").val()&&($("#withdrawalHideByExcelUpload").hide(),$('input[name="withdrawalchequeexcelupload"]').prop("checked",!1))})});$(document).ready(function(){$("#multiplecheque").click(function(){$("#HideBymultiplecheque").toggle(".row")})});$(document).ready(function(){$("#chequeexcelupload").click(function(){$('input[name="chequeclearingtype"]').prop("checked",!1);$("#chequeclearingTypeView").show();$("#singlecheque:checked").val()&&($("#HideBysinglecheque").hide(),$('input[name="singlecheque"]').prop("checked",!1))})});$(document).ready(function(){$("#withdrawalchequeexcelupload").click(function(){$("#withdrawalHideByExcelUpload").toggle(".row");$("#withdrawalsinglecheque:checked").val()&&($("#withdrawalHideBysinglecheque").hide(),$('input[name="withdrawalsinglecheque"]').prop("checked",!1))})});$(document).ready(function(){$("#inwardcheque").click(function(){})});$("input[name='multiplecheque']").change(function(){$("input[name='multiplecheque']:checked").val()?($("#HideBymultiplecheque").removeClass("hideElement1"),$(".row").show(),$("#HideBymultiplecheque").show()):($("#HideBymultiplecheque").addClass("hideElement1"),$(".row").show(),$("#HideBymultiplecheque").show())});$(".datetimepicker").datetimepicker({format:"YYYY-MM-DD",icons:{time:"now-ui-icons tech_watch-time",date:"now-ui-icons ui-1_calendar-60",up:"fa fa-chevron-up",down:"fa fa-chevron-down",previous:"now-ui-icons arrows-1_minimal-left",next:"now-ui-icons arrows-1_minimal-right",today:"fa fa-screenshot",clear:"fa fa-trash",close:"fa fa-remove"}});window.tellerLogoutEvents={};