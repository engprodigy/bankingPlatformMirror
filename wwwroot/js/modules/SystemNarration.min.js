function AddSystemNarration(){var form=$("#system-narration-form");form.valid()&&swal({title:"Are you sure?",text:"System narration record will be saved",type:"question",showCancelButton:!0,confirmButtonColor:"#34D027",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",cancelButtonColor:"#ff9800",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},1e3)})}}).then(function(){var data={text:form.find("[name=text]").val(),isdefault:form.find("[name=isdefault]").attr("checked")};$.ajax(url_path+"/Setup/AddSystemNarration",{method:"POST",contentType:"application/json",data:JSON.stringify(data)}).then(function(){swal({title:"Add system narration",type:"success",text:"System narration record saved successfully!"});$("#system-narration-table").bootstrapTable("refresh");$("#system-narration-modal").modal("hide")},function(){swal({title:"Add system narration",type:"error",text:"There was an error saving this record. Please try again."})})},function(){return})}function UpdateSystemNarration(){var form=$("#system-narration-form");form.valid()&&swal({title:"Are you sure?",text:"System narration record will be updated",type:"question",showCancelButton:!0,confirmButtonColor:"#34D027",confirmButtonText:"Yes, continue",cancelButtonText:"No, stop!",cancelButtonColor:"#ff9800",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},1e3)})}}).then(function(){var data={id:form.find("[name=id]").val(),text:form.find("[name=text]").val(),isdefault:form.find("[name=isdefault]").attr("checked"),datecreated:form.find("[name=datecreated]").val(),createdby:form.find("[name=createdby]").val()};$.ajax(url_path+"/Setup/UpdateSystemNarration",{method:"POST",contentType:"application/json",data:JSON.stringify(data)}).then(function(){swal({title:"Update system narration",type:"success",text:"System narration record updated successfully!"});$("#system-narration-table").bootstrapTable("refresh");$("#system-narration-modal").modal("hide")},function(){swal({title:"Update system narration",type:"error",text:"There was an error updating this record. Please try again."})})},function(){return})}function initNarrationFormValidations(){jQuery.validator.setDefaults({onfocusout:!1,onkeyup:!1,onclick:!1,normalizer:function(value){return $.trim(value)},errorPlacement:function(error){$.notify({icon:"now-ui-icons travel_info",message:error.text()},{type:"danger",placement:{from:"top",align:"right"}})}});$("#system-narration-form").on("submit",function(e){e.preventDefault()});$("#system-narration-form").validate({messages:{text:{required:"System narration text is required"}},onsubmit:!1})}function openNewNarrationModal(){$("#system-narration-form").trigger("reset");$("#btn-update-system-narration").hide();$("#btn-add-system-narration").show();$("#system-narration-header").text("New");$("#system-narration-modal").modal("show")}function openUpdateNarrationModal(row){var form=$("#system-narration-form");form.trigger("reset");form.find("[name=id]").val(row.id);form.find("[name=text]").val(row.text);row.isdefault&&form.find("[name=isdefault]").attr("checked",!0);form.find("[name=datecreated]").val(row.datecreated);form.find("[name=createdby]").val(row.createdby);$("#btn-update-system-narration").show();$("#btn-add-system-narration").hide();$("#system-narration-header").text("Update");$("#system-narration-modal").modal("show")}var url_path=window.location.pathname,systemNarrationEvents;url_path.charAt(url_path.length-1)=="/"&&(url_path=url_path.slice(0,url_path.length-1));$(document).ready(function(){initNarrationFormValidations();$(".modal").perfectScrollbar()});systemNarrationEvents={"click .edit":function(e,value,row){openUpdateNarrationModal(row)},"click .remove":function(e,value,row){swal({title:"Are you sure?",text:"You are about to delete this record!",type:"warning",showCancelButton:!0,confirmButtonColor:"#ff9800",confirmButtonText:"Yes, proceed",cancelButtonText:"No, cancel!",showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(resolve){setTimeout(function(){resolve()},1e3)})}}).then(function(){$.ajax({url:url_path+"/Setup/DeleteSystemNarration/"+row.id,type:"POST",success:function(){swal("Record deleted succesfully");$("#system-narration-table").bootstrapTable("refresh")},error:function(){swal("An exception occured!")}})},function(){return})}};